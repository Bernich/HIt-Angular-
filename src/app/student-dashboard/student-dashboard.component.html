<mat-toolbar *ngIf="!isLoading" class="top-navigation mat-elevation-z4">
  <div class="nav-content">


    <!-- (click)="drawer.toggle() To toggle drawer" -->
    <div class="nav-brand" routerLink="/">
      <img src="/assets/img/white-navbar-brand.png" />
    </div>

    <div class="left-content">


      <div class="profile-section">
        <img class="profile-image"
          [src]="user.profile_pic ? user.profile_pic : 'https://www.pngitem.com/pimgs/m/146-1468479_my-profile-icon-blank-profile-picture-circle-hd.png'"
          alt="Image" />

        <div class="name" *ngIf="user">{{ this.user.firstname }}</div>

        <button style="color: #ff8100" mat-icon-button [matMenuTriggerFor]="menu"
          aria-label="Example icon-button with a menu">
          <mat-icon>arrow_drop_down</mat-icon>
        </button>

      </div>

    </div>




  </div>



  <mat-menu #menu="matMenu">

    <button routerLink="/admin/courses" mat-menu-item
      [style.display]="authService.hasRole('ADMIN') || authService.hasRole('INSTRUCTOR') ? 'block' : 'none'">
      <mat-icon> dialpad</mat-icon>
      <span>{{authService.hasRole('ADMIN') ? "Admin" : "Instructor"}}</span>
    </button>

    <button class="hide-on-mobile" mat-menu-item routerLink="courses">
      <mat-icon>dashboard</mat-icon>
      <span>Dashboard</span>
    </button>

    <button mat-menu-item (click)="enrollWithTrx()">
      <mat-icon>playlist_add</mat-icon>
      <span>Enroll</span>
    </button>

    <button class="hide-on-mobile" mat-menu-item routerLink="account">
      <mat-icon>lock</mat-icon>
      <span>Account</span>
    </button>

    <!-- Hide Feedback for now -->
    <!-- <button class="hide-on-mobile" mat-menu-item routerLink="feedback">
      <mat-icon>feedback</mat-icon>
      <span>Feedback</span>
    </button> -->

    <button mat-menu-item (click)="logOut()">
      <mat-icon>power_settings_new</mat-icon>
      <span>Log Out</span>
    </button>
  </mat-menu>
</mat-toolbar>

<mat-drawer-container class="example-container" *ngIf="!isLoading; else loader">
  <mat-drawer #drawer mode="side" opened class="side-nav">
    <div class="nav-title">APP MENU</div>

    <nav>
      <div class="link-container" *ngFor="let link of links" routerLinkActive="div-active">
        <a mat-button class="nav-link" [routerLink]="link.path" routerLinkActive="active">
          <mat-icon class="mat-18 icon">{{ link.icon }}</mat-icon>
          {{ link.title }}
        </a>
      </div>
    </nav>
  </mat-drawer>
  <mat-drawer-content class="content">
    <div class="main-container">
      <router-outlet></router-outlet>
    </div>
  </mat-drawer-content>
</mat-drawer-container>


<ng-template #loader>
  <app-loader></app-loader>
</ng-template>
